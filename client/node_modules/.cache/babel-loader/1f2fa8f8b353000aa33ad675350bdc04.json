{"ast":null,"code":"var _jsxFileName = \"/Users/stevdiaz/Desktop/MIT SPRING 2021/6835/6835Final/pic/src/components/Canvas.js\";\nimport React, { Component } from 'react';\nimport './Canvas.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Canvas extends React.Component {\n  constructor(props) {\n    super(props);\n    let ref = /*#__PURE__*/React.createRef();\n    this.state = {\n      isDrawing: false,\n      prevPos: {\n        x: 0,\n        y: 0\n      },\n      line: [],\n      ref: ref\n    };\n    this.canvasWidth = 1200;\n    this.canvasHeight = 800;\n  }\n\n  componentDidMount() {\n    this.state.ref.current.width = this.canvasWidth;\n    this.state.ref.current.height = this.canvasHeight;\n    const ctx = this.getCtx();\n    ctx.lineJoin = 'round';\n    ctx.lineCap = 'round';\n    ctx.lineWidth = 5;\n  }\n\n  componentDidUpdate(prevProps) {\n    const transformedHandPos = this.transform(this.props.handPos);\n\n    if (!this.state.isDrawing && this.props.isIndexPoint && !prevProps.isIndexPoint) {\n      this.onStartDraw(transformedHandPos);\n    } else if (this.state.isDrawing && this.props.isIndexPoint && prevProps.isIndexPoint && this.props.handPos !== prevProps.handPos) {\n      this.onMoveFinger(transformedHandPos);\n    } else if (this.state.isDrawing && !this.props.isIndexPoint && prevProps.isIndexPoint) {\n      this.endDrawEvent();\n    } else if (!this.state.isDrawing && this.props.isCircular && !prevProps.isCircular) {\n      this.undo();\n    }\n  }\n\n  transform(handPos) {\n    return {\n      x: handPos.x - 100,\n      y: handPos.y - 100\n    };\n  }\n\n  onStartDraw(posEvent) {\n    const {\n      x,\n      y\n    } = posEvent;\n    const offsetData = {\n      x,\n      y\n    };\n    this.setState({\n      isDrawing: true,\n      prevPos: offsetData\n    });\n  }\n\n  onMoveFinger(posEvent) {\n    if (this.state.isDrawing) {\n      const {\n        x,\n        y\n      } = posEvent;\n      const offsetData = {\n        x,\n        y\n      };\n      const positionData = {\n        start: { ...this.state.prevPos\n        },\n        stop: { ...offsetData\n        }\n      };\n      this.setState(prevState => ({\n        line: prevState.line.concat(positionData)\n      }), () => this.paint(this.state.prevPos, offsetData));\n    }\n  }\n\n  endDrawEvent() {\n    this.setState({\n      isDrawing: false\n    });\n  }\n\n  paint(prevPos, currPos) {\n    const {\n      x,\n      y\n    } = currPos;\n    const {\n      x: prevX,\n      y: prevY\n    } = prevPos;\n    const ctx = this.getCtx();\n    ctx.beginPath();\n    ctx.strokeStyle = 'black';\n    ctx.moveTo(prevX, prevY);\n    ctx.lineTo(x, y);\n    ctx.stroke();\n    this.setState({\n      prevPos: {\n        x,\n        y\n      }\n    });\n  }\n\n  undo() {\n    this.clear();\n    this.state.line.pop();\n\n    for (var i = 1; i < this.state.line.length; i++) {\n      prevPos = this.state.line[i - 1];\n      currPos = this.state.line[i];\n      this.paint(prevPos, currPos);\n    }\n  }\n\n  clear() {\n    const ctx = this.getCtx();\n    ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n  }\n\n  getCtx() {\n    return this.state.ref.current.getContext('2d');\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Canvas-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Canvas-instructions\",\n        children: \"Draw Below\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Canvas-canvas\",\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          id: \"Canvas\",\n          ref: this.state.ref,\n          style: {\n            background: 'var(--offwhite)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/stevdiaz/Desktop/MIT SPRING 2021/6835/6835Final/pic/src/components/Canvas.js"],"names":["React","Component","Canvas","constructor","props","ref","createRef","state","isDrawing","prevPos","x","y","line","canvasWidth","canvasHeight","componentDidMount","current","width","height","ctx","getCtx","lineJoin","lineCap","lineWidth","componentDidUpdate","prevProps","transformedHandPos","transform","handPos","isIndexPoint","onStartDraw","onMoveFinger","endDrawEvent","isCircular","undo","posEvent","offsetData","setState","positionData","start","stop","prevState","concat","paint","currPos","prevX","prevY","beginPath","strokeStyle","moveTo","lineTo","stroke","clear","pop","i","length","clearRect","getContext","render","background"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './Canvas.css';\n\nexport default class Canvas extends React.Component {\n    constructor(props) {\n        super(props);\n        let ref = React.createRef();\n        this.state = {\n            isDrawing: false,\n            prevPos: {\n                x: 0,\n                y: 0,\n            },\n            line: [],\n            ref: ref,\n        };\n        this.canvasWidth = 1200;\n        this.canvasHeight = 800;\n    }\n    componentDidMount() {\n        this.state.ref.current.width = this.canvasWidth;\n        this.state.ref.current.height = this.canvasHeight;\n        const ctx = this.getCtx();\n        ctx.lineJoin = 'round';\n        ctx.lineCap = 'round';\n        ctx.lineWidth = 5; \n    }\n    componentDidUpdate(prevProps) {\n        const transformedHandPos = this.transform(this.props.handPos);\n        if (!this.state.isDrawing && this.props.isIndexPoint && !prevProps.isIndexPoint) {\n            this.onStartDraw(transformedHandPos);\n        } else if (this.state.isDrawing && this.props.isIndexPoint && prevProps.isIndexPoint && \n            this.props.handPos !== prevProps.handPos) {\n            this.onMoveFinger(transformedHandPos);\n        } else if (this.state.isDrawing && !this.props.isIndexPoint && prevProps.isIndexPoint) {\n            this.endDrawEvent();\n        } else if (!this.state.isDrawing && this.props.isCircular && !prevProps.isCircular) {\n            this.undo();\n        }\n    }\n    transform(handPos) {\n        return {\n            x: handPos.x - 100,\n            y: handPos.y - 100,\n        };\n    }\n    onStartDraw(posEvent) {\n        const { x, y } = posEvent;\n        const offsetData = {x, y};\n        this.setState({\n            isDrawing: true,\n            prevPos: offsetData,\n        });\n    }\n    onMoveFinger(posEvent) {\n        if (this.state.isDrawing) {\n            const { x, y } = posEvent;\n            const offsetData = { x, y };\n            const positionData = {\n                start: { ...this.state.prevPos },\n                stop: { ...offsetData },\n            };\n            this.setState(prevState => ({\n                line: prevState.line.concat(positionData),\n            }), () => this.paint(this.state.prevPos, offsetData));\n        }\n    }\n    endDrawEvent() {\n        this.setState({\n            isDrawing: false,\n        });\n    }\n    paint(prevPos, currPos) {\n        const { x, y } = currPos;\n        const { x: prevX, y: prevY } = prevPos;\n\n        const ctx = this.getCtx();\n        ctx.beginPath();\n        ctx.strokeStyle = 'black';\n        ctx.moveTo(prevX, prevY);\n        ctx.lineTo(x, y);\n        ctx.stroke();\n        this.setState({\n            prevPos: {\n                x,\n                y\n            },\n        });\n    }\n    undo() {\n        this.clear();\n        this.state.line.pop();\n        for (var i = 1; i < this.state.line.length; i++) {\n            prevPos = this.state.line[i-1];\n            currPos = this.state.line[i];\n            this.paint(prevPos, currPos);\n        }\n    }\n    clear() {\n        const ctx = this.getCtx();\n        ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n    }\n    getCtx() {\n        return this.state.ref.current.getContext('2d');\n    }\n    render() {\n        return (\n            <div className='Canvas-container'>\n                <div className='Canvas-instructions'>\n                    Draw Below\n                </div>\n                <div className='Canvas-canvas'>\n                    <canvas\n                        id='Canvas'\n                        ref={this.state.ref}\n                        style={{ background: 'var(--offwhite)' }}\n                    />\n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}