{"ast":null,"code":"var EventEmitter = require('events').EventEmitter;\n\nvar Region = module.exports = function (start, end) {\n  this.start = new Vector(start);\n  this.end = new Vector(end);\n  this.enteredFrame = null;\n};\n\nRegion.prototype.hasPointables = function (frame) {\n  for (var i = 0; i != frame.pointables.length; i++) {\n    var position = frame.pointables[i].tipPosition;\n\n    if (position.x >= this.start.x && position.x <= this.end.x && position.y >= this.start.y && position.y <= this.end.y && position.z >= this.start.z && position.z <= this.end.z) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nRegion.prototype.listener = function (opts) {\n  var region = this;\n  if (opts && opts.nearThreshold) this.setupNearRegion(opts.nearThreshold);\n  return function (frame) {\n    return region.updatePosition(frame);\n  };\n};\n\nRegion.prototype.clipper = function () {\n  var region = this;\n  return function (frame) {\n    region.updatePosition(frame);\n    return region.enteredFrame ? frame : null;\n  };\n};\n\nRegion.prototype.setupNearRegion = function (distance) {\n  var nearRegion = this.nearRegion = new Region([this.start.x - distance, this.start.y - distance, this.start.z - distance], [this.end.x + distance, this.end.y + distance, this.end.z + distance]);\n  var region = this;\n  nearRegion.on(\"enter\", function (frame) {\n    region.emit(\"near\", frame);\n  });\n  nearRegion.on(\"exit\", function (frame) {\n    region.emit(\"far\", frame);\n  });\n  region.on('exit', function (frame) {\n    region.emit(\"near\", frame);\n  });\n};\n\nRegion.prototype.updatePosition = function (frame) {\n  if (this.nearRegion) this.nearRegion.updatePosition(frame);\n\n  if (this.hasPointables(frame) && this.enteredFrame == null) {\n    this.enteredFrame = frame;\n    this.emit(\"enter\", this.enteredFrame);\n  } else if (!this.hasPointables(frame) && this.enteredFrame != null) {\n    this.enteredFrame = null;\n    this.emit(\"exit\", this.enteredFrame);\n  }\n\n  return frame;\n};\n\nRegion.prototype.normalize = function (position) {\n  return new Vector([(position.x - this.start.x) / (this.end.x - this.start.x), (position.y - this.start.y) / (this.end.y - this.start.y), (position.z - this.start.z) / (this.end.z - this.start.z)]);\n};\n\nRegion.prototype.mapToXY = function (position, width, height) {\n  var normalized = this.normalize(position);\n  var x = normalized.x,\n      y = normalized.y;\n  if (x > 1) x = 1;else if (x < -1) x = -1;\n  if (y > 1) y = 1;else if (y < -1) y = -1;\n  return [(x + 1) / 2 * width, (1 - y) / 2 * height, normalized.z];\n};\n\nObject.assign(Region.prototype, EventEmitter.prototype);","map":{"version":3,"sources":["/Users/stevdiaz/Desktop/MIT SPRING 2021/6835/6835Final/pic/client/node_modules/leapjs/lib/ui/region.js"],"names":["EventEmitter","require","Region","module","exports","start","end","Vector","enteredFrame","prototype","hasPointables","frame","i","pointables","length","position","tipPosition","x","y","z","listener","opts","region","nearThreshold","setupNearRegion","updatePosition","clipper","distance","nearRegion","on","emit","normalize","mapToXY","width","height","normalized","Object","assign"],"mappings":"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","sourcesContent":["var EventEmitter = require('events').EventEmitter;\n\nvar Region = module.exports = function(start, end) {\n  this.start = new Vector(start)\n  this.end = new Vector(end)\n  this.enteredFrame = null\n}\n\nRegion.prototype.hasPointables = function(frame) {\n  for (var i = 0; i != frame.pointables.length; i++) {\n    var position = frame.pointables[i].tipPosition\n    if (position.x >= this.start.x && position.x <= this.end.x && position.y >= this.start.y && position.y <= this.end.y && position.z >= this.start.z && position.z <= this.end.z) {\n      return true\n    }\n  }\n  return false\n}\n\nRegion.prototype.listener = function(opts) {\n  var region = this\n  if (opts && opts.nearThreshold) this.setupNearRegion(opts.nearThreshold)\n  return function(frame) {\n    return region.updatePosition(frame)\n  }\n}\n\nRegion.prototype.clipper = function() {\n  var region = this\n  return function(frame) {\n    region.updatePosition(frame)\n    return region.enteredFrame ? frame : null\n  }\n}\n\nRegion.prototype.setupNearRegion = function(distance) {\n  var nearRegion = this.nearRegion = new Region(\n    [this.start.x - distance, this.start.y - distance, this.start.z - distance],\n    [this.end.x + distance, this.end.y + distance, this.end.z + distance]\n  )\n  var region = this\n  nearRegion.on(\"enter\", function(frame) {\n    region.emit(\"near\", frame)\n  })\n  nearRegion.on(\"exit\", function(frame) {\n    region.emit(\"far\", frame)\n  })\n  region.on('exit', function(frame) {\n    region.emit(\"near\", frame)\n  })\n}\n\nRegion.prototype.updatePosition = function(frame) {\n  if (this.nearRegion) this.nearRegion.updatePosition(frame)\n  if (this.hasPointables(frame) && this.enteredFrame == null) {\n    this.enteredFrame = frame\n    this.emit(\"enter\", this.enteredFrame)\n  } else if (!this.hasPointables(frame) && this.enteredFrame != null) {\n    this.enteredFrame = null\n    this.emit(\"exit\", this.enteredFrame)\n  }\n  return frame\n}\n\nRegion.prototype.normalize = function(position) {\n  return new Vector([\n    (position.x - this.start.x) / (this.end.x - this.start.x),\n    (position.y - this.start.y) / (this.end.y - this.start.y),\n    (position.z - this.start.z) / (this.end.z - this.start.z)\n  ])\n}\n\nRegion.prototype.mapToXY = function(position, width, height) {\n  var normalized = this.normalize(position)\n  var x = normalized.x, y = normalized.y\n  if (x > 1) x = 1\n  else if (x < -1) x = -1\n  if (y > 1) y = 1\n  else if (y < -1) y = -1\n  return [\n    (x + 1) / 2 * width,\n    (1 - y) / 2 * height,\n    normalized.z\n  ]\n}\n\nObject.assign(Region.prototype, EventEmitter.prototype)"]},"metadata":{},"sourceType":"script"}