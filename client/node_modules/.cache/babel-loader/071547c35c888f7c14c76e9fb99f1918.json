{"ast":null,"code":"var _jsxFileName = \"/Users/stevdiaz/Desktop/MIT SPRING 2021/6835/6835Final/pic/client/src/components/Canvas.js\";\nimport React, { Component } from 'react';\nimport './Canvas.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Canvas extends React.Component {\n  constructor(props) {\n    super(props);\n    let ref = /*#__PURE__*/React.createRef();\n    this.state = {\n      isDrawing: false,\n      prevPos: {\n        x: 0,\n        y: 0\n      },\n      line: [],\n      strokes: [],\n      // strokes[i] is stroke object, which contains color, thickness, and position fields\n      ref: ref\n    };\n    this.canvasWidth = 1200;\n    this.canvasHeight = 800;\n  }\n\n  componentDidMount() {\n    this.state.ref.current.width = this.canvasWidth;\n    this.state.ref.current.height = this.canvasHeight;\n    const ctx = this.getCtx();\n    ctx.lineJoin = 'round';\n    ctx.lineCap = 'round';\n    ctx.lineWidth = this.props.selectedThickness;\n\n    if (!this.props.isDrawer) {\n      console.log('is not drawer...');\n      this.props.socket.on('draw', (...strokes) => {\n        this.drawFromStrokes(strokes);\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.isDrawer) {\n      const transformedHandPos = this.transform(this.props.handPos);\n\n      const emitDraw = () => this.props.socket.emit('drawerDraw', ...this.state.strokes);\n\n      if (!this.state.isDrawing && this.props.isIndexPoint && !prevProps.isIndexPoint) {\n        this.onStartDraw(transformedHandPos);\n        this.props.onStartDraw();\n        emitDraw();\n      } else if (this.state.isDrawing && this.props.isIndexPoint && prevProps.isIndexPoint && this.props.handPos !== prevProps.handPos) {\n        this.onMoveFinger(transformedHandPos);\n        emitDraw();\n      } else if (this.state.isDrawing && !this.props.isIndexPoint && prevProps.isIndexPoint) {\n        this.onEndDraw();\n        this.props.onEndDraw();\n        emitDraw();\n      } else if (this.props.undoId > prevProps.undoId) {\n        this.undo();\n        this.props.onUndo();\n        emitDraw();\n      } else if (this.props.clearId > prevProps.clearId) {\n        this.clear({\n          forUndo: false\n        });\n        this.props.onClear();\n        emitDraw();\n      }\n    }\n  }\n\n  transform(handPos) {\n    return {\n      x: handPos.x - 340,\n      y: handPos.y - 100\n    };\n  }\n\n  onStartDraw(posEvent) {\n    const {\n      x,\n      y\n    } = posEvent;\n    const offsetData = {\n      x,\n      y\n    };\n    const newStrokeObj = {\n      color: this.props.selectedColor,\n      thickness: this.props.selectedThickness,\n      positions: [offsetData]\n    };\n    this.setState(prevState => ({\n      isDrawing: true,\n      prevPos: offsetData,\n      strokes: prevState.strokes.concat(newStrokeObj)\n    }));\n  }\n\n  onMoveFinger(posEvent) {\n    if (this.state.isDrawing) {\n      const {\n        x,\n        y\n      } = posEvent;\n      const offsetData = {\n        x,\n        y\n      };\n      const positionData = {\n        start: { ...this.state.prevPos\n        },\n        stop: { ...offsetData\n        }\n      };\n      let strokes = [...this.state.strokes];\n      const lastIndex = strokes.length - 1;\n      let lastStrokeObject = { ...strokes[lastIndex]\n      };\n      let positions = [...lastStrokeObject.positions];\n      positions.push(offsetData);\n      lastStrokeObject.positions = positions;\n      strokes[lastIndex] = lastStrokeObject;\n      this.setState(prevState => ({\n        line: prevState.line.concat(positionData),\n        strokes: strokes\n      }), () => this.paint(this.state.prevPos, offsetData, this.props.selectedColor, this.props.selectedThickness));\n    }\n  }\n\n  onEndDraw() {\n    this.setState({\n      isDrawing: false\n    });\n  }\n\n  paint(prevPos, currPos, color, thickness) {\n    const {\n      x,\n      y\n    } = currPos;\n    const {\n      x: prevX,\n      y: prevY\n    } = prevPos;\n    const ctx = this.getCtx();\n    ctx.beginPath();\n    ctx.strokeStyle = color;\n    ctx.lineWidth = thickness;\n    ctx.moveTo(prevX, prevY);\n    ctx.lineTo(x, y);\n    ctx.stroke();\n    this.setState({\n      prevPos: {\n        x,\n        y\n      }\n    });\n  }\n\n  clear({\n    forUndo\n  }) {\n    console.log('clear');\n    const ctx = this.getCtx();\n    ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n    if (!forUndo) {\n      this.setState({\n        strokes: []\n      });\n    }\n  }\n\n  undo() {\n    console.log('undo');\n    this.clear({\n      forUndo: true\n    });\n    let strokes = [...this.state.strokes];\n    strokes.pop();\n    this.setState({\n      strokes: strokes\n    }, () => this.drawFromStrokes(this.state.strokes));\n  }\n\n  drawFromStrokes(strokes) {\n    console.log(strokes);\n    strokes.forEach(stroke => {\n      for (let i = 1; i < stroke.positions.length; i++) {\n        const prevPos = stroke.positions[i - 1];\n        const currPos = stroke.positions[i];\n        this.paint(prevPos, currPos, stroke.color, stroke.thickness);\n      }\n    });\n  }\n\n  getCtx() {\n    return this.state.ref.current.getContext('2d');\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Canvas-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Canvas-canvas\",\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          id: \"Canvas\",\n          ref: this.state.ref,\n          style: {\n            background: 'var(--offwhite)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/stevdiaz/Desktop/MIT SPRING 2021/6835/6835Final/pic/client/src/components/Canvas.js"],"names":["React","Component","Canvas","constructor","props","ref","createRef","state","isDrawing","prevPos","x","y","line","strokes","canvasWidth","canvasHeight","componentDidMount","current","width","height","ctx","getCtx","lineJoin","lineCap","lineWidth","selectedThickness","isDrawer","console","log","socket","on","drawFromStrokes","componentDidUpdate","prevProps","transformedHandPos","transform","handPos","emitDraw","emit","isIndexPoint","onStartDraw","onMoveFinger","onEndDraw","undoId","undo","onUndo","clearId","clear","forUndo","onClear","posEvent","offsetData","newStrokeObj","color","selectedColor","thickness","positions","setState","prevState","concat","positionData","start","stop","lastIndex","length","lastStrokeObject","push","paint","currPos","prevX","prevY","beginPath","strokeStyle","moveTo","lineTo","stroke","clearRect","pop","forEach","i","getContext","render","background"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './Canvas.css';\n\nexport default class Canvas extends React.Component {\n    constructor(props) {\n        super(props);\n        let ref = React.createRef();\n        this.state = {\n            isDrawing: false,\n            prevPos: {\n                x: 0,\n                y: 0,\n            },\n            line: [],\n            strokes: [], // strokes[i] is stroke object, which contains color, thickness, and position fields\n            ref: ref,\n        };\n        this.canvasWidth = 1200;\n        this.canvasHeight = 800;\n    }\n    componentDidMount() {\n        this.state.ref.current.width = this.canvasWidth;\n        this.state.ref.current.height = this.canvasHeight;\n        const ctx = this.getCtx();\n        ctx.lineJoin = 'round';\n        ctx.lineCap = 'round';\n        ctx.lineWidth = this.props.selectedThickness;\n        if (!this.props.isDrawer) {\n            console.log('is not drawer...');\n            this.props.socket.on('draw', (...strokes) => {\n                this.drawFromStrokes(strokes);\n            });\n        } \n    }\n    componentDidUpdate(prevProps) {\n        if (this.props.isDrawer) {\n            const transformedHandPos = this.transform(this.props.handPos);\n            const emitDraw = () => this.props.socket.emit('drawerDraw', ...this.state.strokes);\n            if (!this.state.isDrawing && this.props.isIndexPoint && !prevProps.isIndexPoint) {\n                this.onStartDraw(transformedHandPos);\n                this.props.onStartDraw();\n                emitDraw();\n            } else if (this.state.isDrawing && this.props.isIndexPoint && prevProps.isIndexPoint && \n                this.props.handPos !== prevProps.handPos) {\n                this.onMoveFinger(transformedHandPos);\n                emitDraw();\n            } else if (this.state.isDrawing && !this.props.isIndexPoint && prevProps.isIndexPoint) {\n                this.onEndDraw();\n                this.props.onEndDraw();\n                emitDraw();\n            } else if (this.props.undoId > prevProps.undoId) {\n                this.undo();\n                this.props.onUndo();\n                emitDraw();\n            } else if (this.props.clearId > prevProps.clearId) {\n                this.clear({forUndo: false});\n                this.props.onClear();\n                emitDraw();\n            }\n        }\n    }\n    transform(handPos) {\n        return {\n            x: handPos.x - 340,\n            y: handPos.y - 100,\n        };\n    }\n    onStartDraw(posEvent) {\n        const { x, y } = posEvent;\n        const offsetData = {x, y};\n        const newStrokeObj = {\n            color: this.props.selectedColor,\n            thickness: this.props.selectedThickness,\n            positions: [offsetData],\n        };\n        this.setState((prevState) => ({\n            isDrawing: true,\n            prevPos: offsetData,\n            strokes: prevState.strokes.concat(newStrokeObj),\n        }));\n    }\n    onMoveFinger(posEvent) {\n        if (this.state.isDrawing) {\n            const { x, y } = posEvent;\n            const offsetData = { x, y };\n            const positionData = {\n                start: { ...this.state.prevPos },\n                stop: { ...offsetData },\n            };\n            let strokes = [...this.state.strokes];\n            const lastIndex = strokes.length - 1;\n            let lastStrokeObject = {...strokes[lastIndex]};\n            let positions = [...lastStrokeObject.positions];  \n            positions.push(offsetData);\n            lastStrokeObject.positions = positions;\n            strokes[lastIndex] = lastStrokeObject;\n            this.setState(prevState => ({\n                line: prevState.line.concat(positionData),\n                strokes: strokes\n            }), () => this.paint(this.state.prevPos, offsetData, this.props.selectedColor, this.props.selectedThickness));\n        }\n    }\n    onEndDraw() {\n        this.setState({\n            isDrawing: false,\n        });\n    }\n    paint(prevPos, currPos, color, thickness) {\n        const { x, y } = currPos;\n        const { x: prevX, y: prevY } = prevPos;\n\n        const ctx = this.getCtx();\n        ctx.beginPath();\n        ctx.strokeStyle = color;\n        ctx.lineWidth = thickness; \n        ctx.moveTo(prevX, prevY);\n        ctx.lineTo(x, y);\n        ctx.stroke();\n        this.setState({\n            prevPos: {\n                x,\n                y\n            },\n        });\n    }\n    clear({forUndo}) {\n        console.log('clear');\n        const ctx = this.getCtx();\n        ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n        if (!forUndo) {\n            this.setState({\n                strokes: [],\n            });\n        }\n    }\n    undo() {\n        console.log('undo');\n        this.clear({forUndo: true});\n        let strokes = [...this.state.strokes];\n        strokes.pop();\n        this.setState({\n            strokes: strokes,\n        }, () => this.drawFromStrokes(this.state.strokes));\n    }\n    drawFromStrokes(strokes) {\n        console.log(strokes);\n        strokes.forEach(stroke => {\n            for (let i = 1; i < stroke.positions.length; i++) {\n                const prevPos = stroke.positions[i-1];\n                const currPos = stroke.positions[i];\n                this.paint(prevPos, currPos, stroke.color, stroke.thickness);\n            }\n        });\n    }\n    getCtx() {\n        return this.state.ref.current.getContext('2d');\n    }\n    render() {\n        return (\n            <div className='Canvas-container'>\n                <div className='Canvas-canvas'>\n                    <canvas\n                        id='Canvas'\n                        ref={this.state.ref}\n                        style={{ background: 'var(--offwhite)' }}\n                    />\n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}